<!--pages/my/my.wxml-->
<wxs module="util">
  var mapGender = function(gender) {
    var tmp = ""
    switch (gender) {
      case 1:
        tmp = '男';
        break;
      case 2:
        tmp = '女';
        break;
      default:
        tmp = '未知';
    }
    return tmp
  }
  module.exports.mapGender = mapGender;
</wxs>
<view id="root">
  <view class='user-info'>
    <block wx:if="{{userInfo}}">
      <image class='avatar' src="{{userInfo.avatarUrl}}"></image>
      <view class='other'>
        <text class='nick-name'>姓名: {{userInfo.nickName}}</text>
        <text class='gender'>性别: {{util.mapGender(userInfo.gender)}}</text>
      </view>
    </block>
    <block wx:else>
      <button open-type="getUserInfo" lang="zh_CN" bindgetuserinfo="onGotUserInfo">获取用户信息</button>
    </block>
  </view>
</view>